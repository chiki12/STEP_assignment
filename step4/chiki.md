# step4 homework
Chiki Ra

## 課題１
### Wikipediaのリンク構造を使って面白いことを見つける

#### コードについての説明
  - 最初はスライド91ページの参考コードに従って、再帰なしのdfsコード、bfsコードを書きました。
      -  dfs(no recursion) との違い：　.pop() を .popleft()　にしただけ
  - 辞書型の空checkリストを作って、checkされてないノードをcontainerに入れる前同時にcheckリストに入れることで、ループを防げます。

- bfs、dfs（回帰なし） のroute:
  - 方向つきリストを作りました
  - 辞書を作って、keyをノードにし、valueを一個前のノードにすることで、targetから遡れば、条件を満たすルートが得られる。（ルートのリストが逆になるので、最後にreverseメソッドを使わないといけない。）
  - bfsのルートと同様な方法でdfsのルート作成用のdictを作ったら、dictもcheckの役割として使うことができるのに気づき、dfsのとこでcheckとdictを整合しました。(check: key:ノード value: 一個前のノード)

- (recursion)
  - 最初の時にdfs実行の時と同時にルートを求められるいい方法が思いつかなかったので、dfsの回帰visionを作りました
  - 回帰にすると、popを使わなくなってますが、check用のリストが新しい回帰関数が呼び出されるたびに新しいリストが作られます。回帰関数の外にcheck用のリストを置くなら、新しいdfsを求める時に初期化しないといけないので、他の方法を工夫しました。
  1. 呼び出す時に、探索用のリストをstartキーの要素が消されたリストを使うことで、無限ループが防げられました。ps：辞書のコピーの時に等号だけではダメで、copy()を使わなければいけない。(等号だけだと元の辞書の中の要素も消されます)
  2. チェック済みのノードが入ってるリストを関数の引数に入れて、リストが更新された状態で新しい関数を呼び出す。(再帰なしのdfsとほぼ同じやり方)
  - recursionの関数には、呼び出された関数がTrueの時にその時のstartノードをリストに追加すると、ルートがリストに反映されますが、再帰の仕組みより、ノードが逆順に反映されていますので、最後でノードを逆順にしないといけない。
  - そして、routeのリストを関数のなかに作ることがダメなので、外でglobal変数を作りました。(関数の中で使うには`global 変数`と書く必要があることを初めて知りました)



##### 実行とエラー
  - `container.deque()`でエラーが出ました　=> `import collections`
  - `container.empty()`でエラーを出ました。`empty()`メソッドが存在しないとのことで、`while container`に変更しました。

    - 自分が作ったテストと先生が用意したsmallテストで実行できましたが、実際のでかいデータを使ったら、`maximum recursion depth exceeded`というエラーが出ました、それは、パソコンの再帰関数の実行回数の上限(1000)を超えたので、再帰呼び出しが中断されたことで、以下の文をファイルの先頭に書いたら、実行が成功しました。(実行回数が多くなると30000もダメになることがあるので、その時はターミナルを再起動したらうまく動き出しました)
  
```
import sys
sys.setrecursionlimit(30000)
```
  - コードを変更してないはずなのに、今デカいtxtの方で回帰付きのdfsで実行したら`zsh: segmentation fault`というエラーメッセージが出ました

##### 実行結果

dfsの実行結果が長いものが多いので、割愛します。

###### links_small.txt & pages_small.txt:
- bfs:
['Google', 'Android', 'アイスクリーム']
- dfs:
['Google', '人工知能', 'コンピュータ', 'Android', 'アイスクリーム']
- dfs:
['Google', '量子コンピュータ', 'コンピュータ', 'Android', 'キットカット']

###### links.txt & pages.txt:
- bfs:
['相葉雅紀', 'ナイスな心意気', '擬宝珠家', 'Google']
- bfs:
['相葉雅紀', 'ジャニーズ事務所', '嵐']
- bfs:
['嵐', '雷', 'SMAP', '相葉雅紀']

###### 実行の時に使ったidを一応こちらに列挙しました
```
Google　457783
渋谷　22557
日本　927119
アメリカ　162244
英語　2245
相葉雅紀 734441
嵐 107169
```

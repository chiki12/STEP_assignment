# STEP3

## 宿題1　
### 「*」「/」に対応する
- 一番最初にできること

 read_plus(), read_minus()のメソッドのように、read_times(),read_divide()の関数を書く

- 自分の考え

　最初に考えたコードは：　
はらけんのヒントのように、式を二段階処理する 

　最初に*、/を処理してから、二段階目で+、-を処理する形にしました 

　変数をできるだけ増やしたくないので、indexをそのまま使って、二段階目で再びリセットする形にしました


```
while index < len(tokens):
    if tokens[index]['type'] == "TIMES":
      store = tokens[index-1]['number']*tokens[index+1]['number']
      tokens[index-1]={'type': 'NUMBER', 'number': store}
      del tokens[index:index+2]
    elif tokens[index]['type'] == "DIVIDE":
      store = tokens[index-1]['number']/tokens[index+1]['number']
      tokens[index-1]={'type': 'NUMBER', 'number': store}
      del tokens[index:index+2]
    else :
      index += 1 
```

- デバッグについて

最初の考え方で書いたコードで実行したら、printoutなしで終了しない出力になっていたので、最初のwhileのとこのindexの動き方をチェックしたら `index += 1`を書き忘れたのを見つけました

次に、"`1+2`" 
 "`1.0+2.1-3`"
 "`1+1*1+2*8/4+4/2-1`"
 "`0.4/1*2/1/2/1`"
 の実行は通りましたが、
 
 "`1*2*3/4/5+1`","`4*2*3*4`"のように、連続の掛け算がある数式を計算する時にはエラーが出ました。しかし、連続の割り算がある数式には問題なく計算できたので、whileのなかにtimesとdivideの処理の順番を見ました。そして、`if,elif,else`であるべきところが`if,if,else`になってることに気づいて、書き換えたら実行ができました。

## 宿題2

### テストケースを追加する、できるだけ網羅的に
- +,-

`1+1+1+1`

`8-4.0-2-1`

`1.+4`

` 1.0+3-1`

`2.0-1.0-4.5`

- *,/

`2*2*2*2`

`3.0*2*4.1`

`4*0*28*1`

`2/1.0/3.4`

`0/1.0`

`2+4.0*5-6/3*2`

`2/1*3/2*5-1+2.8*2`

- (,)

`((1+2.0+3+3*3)/3+4)*5`

`(1-2+5/1.0)*((4+4)*6)`

`(1.0+2.3)*(3.1-1.1)/((2.4+0)*1+2)`

`(2+1*4+5*(6+4)/5)/2`
## 宿題３

### 括弧に対応する

- 左括弧があったら、タイプを記入すると同時に、indexの列に記入、そして、右括弧が現れたら、一番最近に現れた左括弧のindexを取り出し、token[左括弧のindex,右括弧のindex]のなかの式を計算し、数字に変換する　(indexを変換した後のnumberのindex+1にすることを忘れず！！！！)　　
　　　- これはlineを処理の時と同時にやることができる(')'の後の式はどうであれ括弧のなかの式と関係ないので)

- デバッグ

- tokensをプリントアウトすることで、どの処理に欠陥があるのがわかるかもしれない。
- 実例をコード通りに計算してみたらlineのインデックスとtokensのインデックスが別々であることに気づきました
- そして、len(tokens)を使って'('のインデックスを出そうとしてますが、−1かどうかに十分気をつけました。


- 解き方は一つしか思い浮かべませんでした。そして、デバッグに結構時間かかりました。(「!!!!!」が書いてるところで時間を費やしました)
- 綺麗なコードを書くようにしたが、どの部分を新たな関数にしたらいいかがわからなかったです。(+_  ,  */  ,  ()  のtokens処理式は単なる並列な関係じゃないから、それぞれのtokens処理関数を作っても組み合わせが綺麗に見えない可能性があるではないかと思ってますが、、、)
- modularized_calculator_1.pyにはlineをtokensに変更するときに()を処理せず、()のtokens処理の新しい関数を作って、＊/+-のtokens処理関数の前に実行することによって電卓を実装しました
